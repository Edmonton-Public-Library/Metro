<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_25) on Thu Nov 28 08:10:41 MST 2013 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>Responder (Metro (MeCard) Server Documentation)</title>
<meta name="date" content="2013-11-28">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Responder (Metro (MeCard) Server Documentation)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Responder.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../mecard/Request.html" title="class in mecard"><span class="strong">Prev Class</span></a></li>
<li><a href="../mecard/Response.html" title="class in mecard"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?mecard/Responder.html" target="_top">Frames</a></li>
<li><a href="Responder.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">mecard</div>
<h2 title="Class Responder" class="title">Class Responder</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>mecard.Responder</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">Responder</span>
extends java.lang.Object</pre>
<div class="block">Responder object handles requests and responses to and from the ILS. The 
 responder is the adaptor that requests commands from request builders and 
 then executes them.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>Andrew Nisbet <anisbet@epl.ca></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../mecard/Responder.html#debug">debug</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../mecard/Request.html" title="class in mecard">Request</a></code></td>
<td class="colLast"><code><strong><a href="../mecard/Responder.html#request">request</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../mecard/Responder.html#Responder(mecard.Request, boolean)">Responder</a></strong>(<a href="../mecard/Request.html" title="class in mecard">Request</a>&nbsp;cmd,
         boolean&nbsp;debugMode)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../mecard/Responder.html#createCustomer(mecard.Response)">createCustomer</a></strong>(<a href="../mecard/Response.html" title="class in mecard">Response</a>&nbsp;response)</code>
<div class="block">Converts the customer into a ILS-meaningful expression to create a 
 customer, then executes the command, and populates the argument 
 response with the results.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../mecard/Responder.html#getCustomer(mecard.Response)">getCustomer</a></strong>(<a href="../mecard/Response.html" title="class in mecard">Response</a>&nbsp;response)</code>
<div class="block">Creates and executes the "get customer" command, then 
 executes the command, and populates the argument Response with the customer
 object and or a message about the status of the command.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../mecard/Response.html" title="class in mecard">Response</a></code></td>
<td class="colLast"><code><strong><a href="../mecard/Responder.html#getExceptionResponse(java.lang.RuntimeException)">getExceptionResponse</a></strong>(java.lang.RuntimeException&nbsp;ex)</code>
<div class="block">Creates canned exception responses if something goes wrong.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../mecard/Responder.html#getILSStatus(mecard.Response)">getILSStatus</a></strong>(<a href="../mecard/Response.html" title="class in mecard">Response</a>&nbsp;response)</code>
<div class="block">Gets the status of the ILS server.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../site/CustomerLoadNormalizer.html" title="class in site">CustomerLoadNormalizer</a></code></td>
<td class="colLast"><code><strong><a href="../mecard/Responder.html#getNormalizerPreformatCustomer(mecard.customer.Customer, mecard.Response)">getNormalizerPreformatCustomer</a></strong>(<a href="../mecard/customer/Customer.html" title="class in mecard.customer">Customer</a>&nbsp;customer,
                              <a href="../mecard/Response.html" title="class in mecard">Response</a>&nbsp;response)</code>
<div class="block">Normalizes information from melibraries.ca into a format that the local ILS
 can handle.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../mecard/Response.html" title="class in mecard">Response</a></code></td>
<td class="colLast"><code><strong><a href="../mecard/Responder.html#getResponse()">getResponse</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../mecard/Responder.html#isAuthorized(java.lang.String, mecard.customer.Customer)">isAuthorized</a></strong>(java.lang.String&nbsp;suppliedPin,
            <a href="../mecard/customer/Customer.html" title="class in mecard.customer">Customer</a>&nbsp;customer)</code>
<div class="block">Tests if the request was valid or not based on whether the supplied PIN
 matched the user's pin.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../mecard/Responder.html#meetsMeCardRequirements(mecard.customer.Customer, api.CustomerMessage, java.lang.StringBuilder)">meetsMeCardRequirements</a></strong>(<a href="../mecard/customer/Customer.html" title="class in mecard.customer">Customer</a>&nbsp;customer,
                       <a href="../api/CustomerMessage.html" title="interface in api">CustomerMessage</a>&nbsp;additionalData,
                       java.lang.StringBuilder&nbsp;failResponseMessage)</code>
<div class="block">Tests if the customer meets the required MeCard requirements.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../mecard/Responder.html#updateCustomer(mecard.Response)">updateCustomer</a></strong>(<a href="../mecard/Response.html" title="class in mecard">Response</a>&nbsp;response)</code>
<div class="block">Creates the ILS specific command to run to update a customer account, then
 runs it and places the results into the response object.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="request">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>request</h4>
<pre>protected&nbsp;<a href="../mecard/Request.html" title="class in mecard">Request</a> request</pre>
</li>
</ul>
<a name="debug">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>debug</h4>
<pre>protected final&nbsp;boolean debug</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Responder(mecard.Request, boolean)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Responder</h4>
<pre>public&nbsp;Responder(<a href="../mecard/Request.html" title="class in mecard">Request</a>&nbsp;cmd,
         boolean&nbsp;debugMode)</pre>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>cmd</code> - the value of cmd</dd><dd><code>debugMode</code> - the value of debugMode</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getExceptionResponse(java.lang.RuntimeException)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getExceptionResponse</h4>
<pre>public static&nbsp;<a href="../mecard/Response.html" title="class in mecard">Response</a>&nbsp;getExceptionResponse(java.lang.RuntimeException&nbsp;ex)</pre>
<div class="block">Creates canned exception responses if something goes wrong.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>ex</code> - the exception thrown</dd>
<dt><span class="strong">Returns:</span></dt><dd>String value of the response with code.</dd></dl>
</li>
</ul>
<a name="getResponse()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getResponse</h4>
<pre>public&nbsp;<a href="../mecard/Response.html" title="class in mecard">Response</a>&nbsp;getResponse()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>the Response of the command.</dd></dl>
</li>
</ul>
<a name="getCustomer(mecard.Response)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCustomer</h4>
<pre>public&nbsp;void&nbsp;getCustomer(<a href="../mecard/Response.html" title="class in mecard">Response</a>&nbsp;response)</pre>
<div class="block">Creates and executes the "get customer" command, then 
 executes the command, and populates the argument Response with the customer
 object and or a message about the status of the command.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>response</code> - object as a container for the results.</dd></dl>
</li>
</ul>
<a name="getILSStatus(mecard.Response)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getILSStatus</h4>
<pre>public&nbsp;void&nbsp;getILSStatus(<a href="../mecard/Response.html" title="class in mecard">Response</a>&nbsp;response)</pre>
<div class="block">Gets the status of the ILS server.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>response</code> - </dd></dl>
</li>
</ul>
<a name="createCustomer(mecard.Response)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createCustomer</h4>
<pre>public&nbsp;void&nbsp;createCustomer(<a href="../mecard/Response.html" title="class in mecard">Response</a>&nbsp;response)</pre>
<div class="block">Converts the customer into a ILS-meaningful expression to create a 
 customer, then executes the command, and populates the argument 
 response with the results.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>response</code> - object</dd></dl>
</li>
</ul>
<a name="updateCustomer(mecard.Response)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateCustomer</h4>
<pre>public&nbsp;void&nbsp;updateCustomer(<a href="../mecard/Response.html" title="class in mecard">Response</a>&nbsp;response)</pre>
<div class="block">Creates the ILS specific command to run to update a customer account, then
 runs it and places the results into the response object.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>response</code> - </dd></dl>
</li>
</ul>
<a name="getNormalizerPreformatCustomer(mecard.customer.Customer, mecard.Response)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNormalizerPreformatCustomer</h4>
<pre>public&nbsp;<a href="../site/CustomerLoadNormalizer.html" title="class in site">CustomerLoadNormalizer</a>&nbsp;getNormalizerPreformatCustomer(<a href="../mecard/customer/Customer.html" title="class in mecard.customer">Customer</a>&nbsp;customer,
                                                    <a href="../mecard/Response.html" title="class in mecard">Response</a>&nbsp;response)</pre>
<div class="block">Normalizes information from melibraries.ca into a format that the local ILS
 can handle. Example: some libraries can only accept 4 digit pins. The 
 rules for making that happen start here. Once completed the response
 object will contain the changes that were made. In our example an 
 explanation of that the over-sized PIN was truncated and what the new value
 is can be added.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>customer</code> - </dd><dd><code>response</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>customer load normalizer.</dd></dl>
</li>
</ul>
<a name="meetsMeCardRequirements(mecard.customer.Customer, api.CustomerMessage, java.lang.StringBuilder)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>meetsMeCardRequirements</h4>
<pre>protected&nbsp;boolean&nbsp;meetsMeCardRequirements(<a href="../mecard/customer/Customer.html" title="class in mecard.customer">Customer</a>&nbsp;customer,
                              <a href="../api/CustomerMessage.html" title="interface in api">CustomerMessage</a>&nbsp;additionalData,
                              java.lang.StringBuilder&nbsp;failResponseMessage)</pre>
<div class="block">Tests if the customer meets the required MeCard requirements. MeCard 
 users must be:
 <ul>
 <li>Over the age of 18</li>
 <li>Must to be a reciprocal customer at the home library.</li>
 <li>Must be in good standing at their home library.</li>
 <li>Must be a resident of the home library's service area.</li>
 <li>Must have a valid expiry date.</li>
 <li>Must have mandatory account fields filled with valid data.</li>
 </ul></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>customer</code> - </dd><dd><code>additionalData</code> - </dd><dd><code>failResponseMessage</code> - buffer to add any fail messages.</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if the customer meets the MeCard participation requirements
 and false otherwise.</dd></dl>
</li>
</ul>
<a name="isAuthorized(java.lang.String, mecard.customer.Customer)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>isAuthorized</h4>
<pre>public&nbsp;boolean&nbsp;isAuthorized(java.lang.String&nbsp;suppliedPin,
                   <a href="../mecard/customer/Customer.html" title="class in mecard.customer">Customer</a>&nbsp;customer)</pre>
<div class="block">Tests if the request was valid or not based on whether the supplied PIN
 matched the user's pin.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>suppliedPin</code> - </dd><dd><code>customer</code> - the value of customer</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if the user is authorized and false otherwise.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Responder.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../mecard/Request.html" title="class in mecard"><span class="strong">Prev Class</span></a></li>
<li><a href="../mecard/Response.html" title="class in mecard"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?mecard/Responder.html" target="_top">Frames</a></li>
<li><a href="Responder.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
